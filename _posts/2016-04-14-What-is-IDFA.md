---
layout:     post
title:      What is IDFA
summary:    Learn more about the Apple Advertising Identifier and how to use it.
---
 
## What is it

The _Identifier For Advisers_ is an alphanumeric string generated by an iOS device.

It is the same for all apps and publishers and should be used only for serving advertisements.

But this value is non-permanent and can be regenerated by the end user.

Usually it should be used by developers to improve the target of their ads (based on interests or not).

To reset the IDFA on an iPhone, open the Settings app and go to:

{% highlight swift %}
Settings → Privacy → Advertising → Reset Advertising Identifier
{% endhighlight %}

## Retrieve the identifier

First, you need to check **if the user has enabled ad tracking**. Only if he did so, you can use the IDFA.
 
You can check it by calling `isAdvertisingTrackingEnabled` method of `ASIdentifierManager`.

From the [official documentation](https://developer.apple.com/library/ios/documentation/AdSupport/Reference/ASIdentifierManager_Ref/#//apple_ref/occ/instp/ASIdentifierManager/advertisingTrackingEnabled):

> isAdvertisingTrackingEnabled
>
> Check the value of this property before performing any advertising tracking. If the value is `false`, use the advertising identifier only for the following purposes: frequency capping, attribution, conversion events, estimating the number of unique users, advertising fraud detection, and debugging.

On Xcode, import the AdSupport.framework and use this function:

{% highlight swift %}
import AdSupport

func currentIDFA() -> String? {
    // Check if Advertising Tracking is Enabled
    if (ASIdentifierManager.sharedManager().advertisingTrackingEnabled == true) {
        // Get and return the IDFA
        return = ASIdentifierManager.sharedManager().advertisingIdentifier.UUIDString
    }
    return nil
}
{% endhighlight %}

## Does your app need it ?

Sometimes, even though you did not use the IDFA directly into your app, a third party library might have.
Usually Google Analytics and Facebook SDK always requires the advertising identifier.

There is an [easy way](http://stackoverflow.com/questions/23124663/does-this-app-use-the-advertising-identifier-idfa-admob-6-8-0/25725074#25725074) to verify whether you need to include it on iTunes Connect or not.

Within the command line, go to your project/workspace folder and run the following command to find which files are using the advertising identifier.

{% highlight lineanchors %}
fgrep -R advertisingIdentifier .
{% endhighlight lineanchors %}

## Submit an app on iTunesConnect

### App Submission

If your app does need the IDFA then you **must** inform Apple while submitting an app on iTunesConnect.

To do so, first check **YES** when asked if _this app uses the Advertising Identifier (IDFA) ?_

![_config.yml]({{ site.baseurl }}/images/idfa/first_checkbox.png)

Then you will need to give more information about how you this identifier:

![_config.yml]({{ site.baseurl }}/images/idfa/detail_checkboxes.png)

But what does this all mean ?

| Checkbox  | Description |
|:----------|:------------|	
| Serve advertising within the app | Does your app display advertising banner? |
| Attribute this app installation to a previously served advertisement	| Can your app be installed through advertisings, for example on Facebook? |
| Attribute an action taken within this app to a previously served advertisement | Do you track some events within the app: view tracking, user opens an ad, etc. ? |
| I, <my name> confirm that this app, ... | Usual terms and conditions checkbox |

### App Rejection 

If you did not enable the checkboxes and if Apple determines that your app does use IDFA, your app will be put into the Invalid Binary status, and you will be notified by email.

Similarly, if you checked them but your app uses IDFA in ways that do not match the statements you checked, your app will be rejected by App Review and put into the Rejected status.

In either case, when you resubmit the build, you will be presented with the IDFA questions again and can provide the appropriate answers.

## External links

* [Apple Documentation](https://developer.apple.com/library/ios/documentation/AdSupport/Reference/ASIdentifierManager_Ref/)
* [TechCrunch Article](http://techcrunch.com/2014/02/03/apples-latest-crackdown-apps-pulling-the-advertising-identifier-but-not-showing-ads-are-being-rejected-from-app-store/)
* [AppsFlyer Article](https://support.appsflyer.com/hc/en-us/articles/207032086-New-Apple-IDFA-Guidelines-How-To-Submit-Your-iOS-App-With-IDFA)
* [iTunesConnect Documentation](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SubmittingTheApp.html)
